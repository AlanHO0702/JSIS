@page "/DynamicTemplate/Paper3L/{itemId}/{paperNum}"
@model PcbErpApi.Pages.DynamicTemplate.Paper3LDetailModel
@{
    Layout = "_Layout";
    ViewData["Title"] = string.IsNullOrWhiteSpace(Model.ItemName) ? Model.ItemId : $"{Model.ItemId} {Model.ItemName}";
    ViewData["TableTitle"] = Model.PageTitle;
    ViewData["DictTableName"] = Model.DictTableName;
    ViewData["AddApiUrl"] = $"/api/DynamicTable/AddPaper/{Model.MasterDictTable}";
    ViewData["SubRouteTemplate"] = Model.DetailRouteTemplate;
    ViewData["QueryRedirectUrl"] = Url.Page("/DynamicTemplate/Paper3L", new { itemId = Model.ItemId }) ?? "/DynamicTemplate/Paper3L";
    ViewData["DeleteApiUrl"] = Model.MasterDictTable;
    ViewData["ReportSpName"] = Model.ReportSpName ?? "";
    ViewData["ActionRailPartial"] = Model.ActionRailPartial;
    ViewData["QueryFields"] = Model.QueryFields;
}

<div class="erp-detail-container">
    @await Html.PartialAsync("~/Pages/Shared/_DetailHeaderSection.cshtml", Model)
    <script>window.__multiTabAutoSelectFirstRow = true;</script>
    @await Html.PartialAsync("~/Pages/Shared/_MultiTabDetail.cshtml")
    @await Html.PartialAsync("~/Pages/Shared/_Paper3LSubDetail1.cshtml")
</div>
@await Html.PartialAsync("~/Pages/Shared/_FieldDictModal.cshtml", Model.FieldDictList, ViewData)
<script>window._itemId = "@(Model.ItemId ?? "")";</script>

@if ((Model.CustomButtons?.Count > 0))
{
    <style>
    :root{
      --fab-left: 12px;
      --fab-width: 120px;
      --fab-gap: 14px;
      --rail-reserve: calc(var(--fab-left) + var(--fab-width) + var(--fab-gap));
    }

    .erp-detail-container{
        margin-left: var(--rail-reserve) !important;
        margin-right: 3vw !important;
        padding: 12px 0 !important;
    }

    #topToolbar{
        margin-left: calc(-1 * var(--rail-reserve)) !important;
        padding-left: 0 !important;
        justify-content: flex-start !important;
    }
    #topToolbar > .ms-2, #topToolbar .btn-toolbar{ margin-left: 0 !important; }

    #headerTabs{ position: relative; z-index: 1; margin-left: 0 !important; }
    .multi-tab-detail{ margin-left: 0 !important; padding-left: 0 !important; }
    </style>
}

<script>window._dictTableName = "@(string.IsNullOrWhiteSpace(Model.DetailDictTable) ? Model.DictTableName : Model.DetailDictTable)";</script>
<script src="~/js/fieldDictModal.js" asp-append-version="true"></script>
