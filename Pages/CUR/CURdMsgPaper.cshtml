@page
@using WebRazor.Models
@model PcbErpApi.Pages.CUR.CURdMsgPaperPageModel


@await Html.PartialAsync(
  "_MasterDetailTemplate",
  new MasterDetailConfig {
      DomId        = "md_paper",
      MasterTitle  = "主動訊息設定",
      DetailTitle  = "單據別發信對象檔",
      MasterTable  = "CURdMsgPaperBas",
      DetailTable  = "CURdMsgPaperUser",
      MasterDict   = "CURdMsgPaperBas",
      DetailDict   = "CURdMsgPaperUser",

      // ⭐ 主檔 → 明細查詢用
      KeyMap       = new [] { 
          new KeyMap("PaperId","PaperId"),
          new KeyMap("Kind","Kind")
      },

      // ⭐ 更新明細資料用（這個才是關鍵！）
      DetailKeyFields = new [] { "PaperId","Kind","UserId" },

      MasterTop    = 500,
      MasterOrderBy= "PaperId"
  })
@using PcbErpApi.Models
@await Html.PartialAsync("_FieldDictModal", new List<CURdTableField>(), ViewData)
<script src="~/js/fieldDictModal.js"></script>

