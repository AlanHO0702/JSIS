@page "/FMEdIssueMain"
@model FMEdIssuesModel
@{
    ViewData["TableTitle"] = "製令單";
    ViewData["SubRouteTemplate"] = "/FME/FMEdIssueSub/{PaperNum}";   // 單身頁路徑（明細）
    ViewData["AddApiUrl"] = "/api/FMEdIssueMain";                // 新增 API 路徑
    ViewData["DictTableName"] = Model.TableName;                 // <== ★★ 對應資料字典表名
    ViewData["PaginationVm"] = new PaginationModel {
        PageNumber = Model.PageNumber,
        TotalPages = Model.TotalPages,
        RouteUrl = "/FME/FMEdIssueMain"                              // 前端查詢路由
    };
    ViewData["ReportSpName"] = "FMEdIssuePaper_CIR";             // 報表名稱（依你實際報表）
}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>

<script>window._dictTableName = "@(ViewData["DictTableName"] ?? Model.TableName)";</script>
@await Html.PartialAsync("~/Pages/Shared/_TableListPartial.cshtml", Model, ViewData)
@await Html.PartialAsync("_FieldDictModal", Model.FieldDictList, ViewData)
<script src="~/js/fieldDictModal.js" asp-append-version="true"></script>
