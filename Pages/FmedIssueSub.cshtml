@page "{PaperNum}"
@model FMEdIssueSubModel
@{
    ViewData["TableTitle"] = $"製令單明細（{Model.MasterKey}）";
    ViewData["DictTableName"] = Model.TableName;
    ViewData["AddApiUrl"] = "/api/FMEdIssueMain";                 // 主檔 API（或 /api/FMEdIssueSub 若要新增明細）
    ViewData["SubRouteTemplate"] = "/FMEdIssueSub/{PaperNum}";    // 明細頁路徑
    ViewData["QueryRedirectUrl"] = Url.Page("/FMEdIssueMain");       // 返回的主頁面（製令單主檔）
    ViewData["DeleteApiUrl"] = "FMEdIssueMain";                   // 用於刪除主檔或明細的 API 名稱
    ViewData["ReportSpName"] = "FMEdIssuePaper_CIR";              // 對應報表名稱
    ViewData["ActionRailPartial"] = "~/Pages/FME/IssueSubCustomButton.cshtml"; // ← 指定本頁的按鈕 
}
<script>window._dictTableName = "@(ViewData["DictTableName"] ?? Model.TableName)";</script>
@await Html.PartialAsync("~/Pages/Shared/_TableDetailPartial.cshtml", Model)
@await Html.PartialAsync("_FieldDictModal", Model.FieldDictList, ViewData)
<script src="~/js/fieldDictModal.js"></script>
